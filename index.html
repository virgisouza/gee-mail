<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>geemails</title>
    <link href="css/style.css" rel="stylesheet" media="screen">
    <script src="js/mail-generator.js"></script>
    <script>
      window.onload = function (){

          //console.log(geemails);
        for(var i = 0; i<geemails.length; i++){
          //console.log(geemails[i]);
          //console.log(geemails[i].body);
          //console.log(geemails[i].sender);
          //console.log(geemails[i].subject);
          //console.log(geemails[i].date);


          var dateRow = document.createElement("tr");
          dateRow.className = "dateBox";
          mainContent.appendChild(dateRow);

          var dateContent = document.createElement('div');
          dateContent.className = "dates";
          dateContent.innerHTML = geemails[i].date;
          dateRow.appendChild(dateContent);

          var senderRow = document.createElement("tr");
          senderRow.className = "senderBox";
          mainContent.appendChild(senderRow);

          var senderContent = document.createElement('div');
          senderContent.className = "senders";
          senderContent.innerHTML =geemails[i].sender;
          senderRow.appendChild(senderContent);

          var subjectRow = document.createElement("tr");
          subjectRow.className = "subjectBox";
          mainContent.appendChild(subjectRow);

          var subjectContent = document.createElement('div');
          subjectContent.className = "subjects";
          subjectContent.innerHTML = "Subject: "+ geemails[i].subject;
          subjectRow.appendChild(subjectContent);

    
           var bodyRow = document.createElement("div");
            bodyRow.className = "bodyBox";
            mainContent.appendChild(bodyRow);
           
            var buttonBox = document.createElement('div');
          buttonBox.className = "buttonBox";
          bodyRow.appendChild(buttonBox);

          var getMessageButton = document.createElement("button");
          getMessageButton.className = "expandMessage";
          buttonBox.appendChild(getMessageButton);
          var t = document.createTextNode("Message");
          getMessageButton.appendChild(t);
          
           var bodyContent = document.createElement("div");
            bodyContent.className = "bodyStuff";
            bodyContent.innerHTML = geemails[i].body;
            getMessageButton.appendChild(bodyContent);

         var newMessageBox = document.createElement('div');
          newMessageBox.className = "newMessageBox";
          items.appendChild(newMessageBox);



        count.innerHTML++;

      }

      function newMessageData(){
         var dateRow = document.createElement("tr");
          dateRow.className = "dateBox";
          mainContent.appendChild(dateRow);

          var dateContent = document.createElement('div');
          dateContent.className = "dates";
          dateContent.innerHTML = geemails[i].date;
          dateRow.appendChild(dateContent);

          var senderRow = document.createElement("tr");
          senderRow.className = "senderBox";
          mainContent.appendChild(senderRow);

          var senderContent = document.createElement('div');
          senderContent.className = "senders";
          senderContent.innerHTML =geemails[i].sender;
          senderRow.appendChild(senderContent);

          var subjectRow = document.createElement("tr");
          subjectRow.className = "subjectBox";
          mainContent.appendChild(subjectRow);

          var subjectContent = document.createElement('div');
          subjectContent.className = "subjects";
          subjectContent.innerHTML = "Subject: "+ geemails[i].subject;
          subjectRow.appendChild(subjectContent);

    
           var bodyRow = document.createElement("div");
            bodyRow.className = "bodyBox";
            mainContent.appendChild(bodyRow);
           
            var buttonBox = document.createElement('div');
          buttonBox.className = "buttonBox";
          bodyRow.appendChild(buttonBox);

          var getMessageButton = document.createElement("button");
          getMessageButton.className = "expandMessage";
          buttonBox.appendChild(getMessageButton);
          var t = document.createTextNode("Message");
          getMessageButton.appendChild(t);
          
           var bodyContent = document.createElement("div");
            bodyContent.className = "bodyStuff";
            bodyContent.innerHTML = geemails[i].body;
            getMessageButton.appendChild(bodyContent);

         var newMessageBox = document.createElement('div');
          newMessageBox.className = "newMessageBox";
          items.appendChild(newMessageBox);


          count.innerHTML++;

      }

          var bodyElem = document.getElementsByClassName("expandMessage")
          for(var i = 0; i<bodyElem.length; i++){
          bodyElem[i].addEventListener("click", showBody); 

      }


      function showBody(){
        var bodyMessage = this.querySelectorAll(".bodyStuff")[0];
      if(bodyMessage.style.display === "none"){
       bodyMessage.style.display = "inline-block";
      }else{
       bodyMessage.style.display = "none";



        }
     }



function addNewMessage() {
           setInterval(function(){window.geemails.push(getNewMessage());newMessageData();}, 3000);
        }

        addNewMessage();



};

 
         
       

        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser */
        
      

    </script>
  </head>
  <body>
    <div class="container" id="main">
      <body>
    <div id="title">
      <h2>GEE MAIL</h2>
    </div>

    <div id="count"></div>
    
    <div id="mainContent"></div>

    <div id="items"></div>
    

    </div>
    
  </body>
</html>